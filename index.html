<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="./bootstrap.min.css">
    <script src="./codeflask.min.js"></script>
  </head>
  <body>
    <button onclick="window.send()" class="btn btn-primary">SEND</button>
    <div class="editor"></div>
    <script>
      const text = isRPGA =>
`/*
  使用方法:
  左上の「SEND」ボタンを押すと、
  ここで書いたコードが \`console.log( eval( CODE ))\` されます。
  ${isRPGA?"\n  例えば、以下のコードのコメントアウトを解除し、SENDを押すことで、\n  アツマールのゲームパッドAPIの情報を取得することができます。":""}
  さっそくブラウザの DevTools を開いて、トライしてみましょう。
*/

${isRPGA?"// console.log(\"何かキーパッドを押してください\");":""}
${isRPGA?"// window.RPGAtsumaru.controllers.defaultController.subscribe(console.log);":""}
`
      const editor = new CodeFlask('.editor', {
        language: 'js',
        lineNumbers: true
      });
      window.send = () => {
        console.log(eval(editor.code));
      };
      editor.updateCode(text(!!window.RPGAtsumaru));
    </script>
    <style>	
      body {	
        height: 100%;
      }
      .codeflask {
        height: 90%
      }
    </style>
  </body>
</html>
